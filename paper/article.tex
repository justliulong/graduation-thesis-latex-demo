\documentclass[UTF8,12pt, AutoFakeBold,fontset = founder]{ctexart}
% fontset = founder 设置更加丰富的字体
\usepackage{geometry,amsmath,amsthm,amssymb,amsfonts}
\usepackage{graphicx}
\usepackage{float}  % 导入代码块浮点包
\usepackage{microtype} % 解决行溢出问题
\setlength{\emergencystretch}{3em} % 解决行溢出问题


% \setlength{\voffset}{0.6cm} % 将页面内容向上移动

\usepackage{fancyhdr}
\renewcommand{\headrulewidth}{0pt} % 移除页眉横线
% \sectionfont{\centering} % 居中显示标题

% ========== 页眉配置 ==========
\pagestyle{fancy}
\fancyhf{}
% ========== 自定义标记系统 ==========
\renewcommand{\sectionmark}[1]{%
    \markboth{第 \arabic{section} 章\quad #1}{} % 控制 leftmark 内容
}
\renewcommand{\subsectionmark}[1]{} % 禁用子节标记

\renewcommand{\headrule}{%
    \vspace{1pt}
    \hrule width\headwidth height 1.2pt % 粗线
    \vspace{1.5pt}
    \hrule width\headwidth height 0.4pt % 细线
}


% 左页眉固定内容
\fancyhead[L]{\normalfont\small 南昌航空大学硕士学位论文}
% 右页眉智能显示
\fancyhead[R]{\normalfont\small \leftmark }

\fancyfoot[C]{\thepage} % 将页码放置在页脚中央


\usepackage{sectsty}
\usepackage{authblk} % 对应中文部分的作者机构特殊语法
\usepackage{booktabs}
\usepackage{enumitem}

\usepackage{titletoc}
\usepackage{titlesec}
\usepackage{zhnumber} % 设置标题中文序号
% \renewcommand\thesection{\zhnum{section}}
\renewcommand\thesubsection{\arabic{section}.\arabic{subsection}}

\usepackage{tocloft} % 用于定制目录中的条目格式

% 重定义目录标题
\renewcommand{\contentsname}{%
  \fontsize{16pt}{24pt}\selectfont % 三号字体，1.5 倍行距
  \bfseries 目录 % 加粗
  \vspace{24pt} % 段前 24 磅
}

\fancypagestyle{mulu}{
    \fancyhf{}
    % 左页眉固定内容
    \fancyhead[L]{\normalfont\small 南昌航空大学硕士学位论文}
    % 右页眉智能显示
    \fancyhead[R]{\normalfont\small 目录 }
    \fancyfoot[C]{\thepage} % 将页码放置在页脚中央
    \renewcommand{\headrule}{%
    \vspace{1pt}
    \hrule width\headwidth height 1.2pt % 粗线
    \vspace{1.5pt}
    \hrule width\headwidth height 0.4pt % 细线
  }
}


% 为section和subsection添加引导线
\renewcommand{\cftsecleader}{\cftdotfill{\cftdotsep}}
\renewcommand{\cftsubsecleader}{\cftdotfill{\cftdotsep}}
\renewcommand{\cftdotsep}{0.7} % 默认值为1，此处设为0.5

% 取消目录中的加粗
\renewcommand{\cftsecfont}{\normalfont}
\renewcommand{\cftsecpagefont}{\normalfont}      % section页码
\renewcommand{\cftsubsecfont}{\normalfont}

% 调整行间距
\setlength{\cftbeforesecskip}{0.5em}     % section间距
\setlength{\cftbeforesubsecskip}{0.3em}  % subsection间距


\CTEXsetup[name={第,章},number={{\arabic{section}}}]{section}
\sectionfont{\centering} % 居中显示标题

% 使用 titlesec 设置章节与标题的分隔符
% 自定义带编号章节格式：第x章 标题（居中）
\titleformat{\section}[block]{\centering\bfseries\large}{第\arabic{section}章\quad}{0pt}{}

% 自定义无编号章节格式（摘要/参考文献/致谢）
\titleformat{name=\section,numberless}[block]{\centering\bfseries\large}{}{0pt}{}

% 设置 subsection 格式
\titleformat{\subsection}
  {\mdseries \heiti \fontsize{12pt}{18pt}\selectfont} % 黑体、小四号、加粗
  {\thesubsection} % 编号
  {1em} % 编号与标题之间的水平间距
  {} % 标题内容前的附加内容
%   [\vspace{0.5em}] % 标题后的垂直间距

% 设置 subsubsection 格式
\titleformat{\subsubsection}
  {\mdseries \heiti \fontsize{12pt}{18pt}\selectfont} % 黑体、小四号、加粗
  {\thesubsubsection} % 编号
  {1em} % 编号与标题之间的水平间距
  {} % 标题内容前的附加内容
%   [\vspace{0.5em}] % 标题后的垂直间距


\setlength{\baselineskip}{20pt}  % 正文20磅行距

\newcommand{\wideword}[1]{%
  \sodef\spaced{}{0.07cm}{0.07cm}{0.07cm}%
  \spaced{#1}%
}

\usepackage{listings} % 配置附件代码块
\usepackage{setspace}
\usepackage{ragged2e} % 设置两端对齐需要的模块
\usepackage{seqsplit} % 将长单词或者字母串断开，自动换行
\newcommand{\sectspacemode}{\setstretch{1.5}} % 设置\section内容的行距为1.5倍

\usepackage{hyperref} % 点击跳转
\usepackage{xcolor} % 引入颜色包
\usepackage{caption}
\usepackage{subcaption} % 引入子图
\usepackage{extsizes} % 扩展字体，允许使用字号更大

\hypersetup{hidelinks,
	colorlinks=true,
	linkcolor=black,  % 目录链接的颜色
    citecolor=blue,  % 文献引用的链接颜色
	pdfstartview=Fit,
	breaklinks=true
}

%! 下面这条命令是不压缩pdf, 这样编译tex会很快，但是最终的pdf会很大，如果最终定稿了，请注释掉此行，这样最终的pdf会更小
\special{dvipdfmx:config z 0}

% 设置图、表、公式
\counterwithin{figure}{section}
\renewcommand{\figurename}{Figure} % 将图变成figure
\counterwithin{table}{section}
\renewcommand{\tablename}{Table}
\counterwithin{equation}{section}

\renewcommand{\thefigure}{\arabic{section}.\arabic{figure}}
\renewcommand {\thetable} {\arabic{section}.\arabic{table}}
\renewcommand {\theequation} {\arabic{section}.\arabic{equation}}

\captionsetup{labelformat=default,labelsep=space} %去除图注、表注的冒号
% 设置图像图注为中文
\captionsetup[figure]{name=图}
\graphicspath{{../images/}} % 设置图片路径
% 设置表格图注为中文
\captionsetup[table]{name=表}


% 设置中文字体为宋体
\setCJKmainfont{SimSun}

% 设置英文字体为 Times New Roman
\setmainfont{Times New Roman}
% 引入华文行楷字体
\setCJKfamilyfont{huawenxingkai}{STXingkai} % 字体名称可能与系统显示不同，需确认
\newcommand{\huawenxingkai}{\CJKfamily{huawenxingkai}}

% 设置段落格式
\setlength{\parindent}{2em} % 首行缩进 2 字符
\setlength{\parskip}{0pt} % 段前段后 0 磅
\linespread{1.08} % 行距 20 磅（12pt × 1.08 ≈ 20pt）
\justifying % 两端对齐

% \title{Prediction of urban air quality by data mining}
% % authblk 提供的特殊用法，将作者机构作为 option 进行捆绑
% \author[1]{Long Liu}
% \affil{School of Information Engineering}
% \date{}
\usepackage{subfiles} % 多文件编译包
\usepackage{cite}

\bibliographystyle{ref/gbt7714-numerical}
% 禁用默认标题
% \renewcommand{\refname}


\geometry{paperwidth=21cm, paperheight=29.7cm,left=3cm,right=3cm,top=2.5cm, bottom=2.5cm}

\begin{document}
% \begin{sloppypar}
\makeatletter
% 定义引用格式
\def\@cite#1#2{\textsuperscript{[{#1\if@tempswa , #2\fi}]}}
\setlist[enumerate]{itemsep=0pt, parsep=0pt} % 设置enumerate环境的垂直间距

\subfile{sections/cover}

\subfile{sections/abstract}



% \pagestyle{fancy} % 从这个地方一下全遵循自定义页眉
\newpage
{
    \begin{flushleft}
        \phantomsection % 手动插入锚点
        \centering\tableofcontents
        \addcontentsline{toc}{section}{目录} % 将“目录”添加到目录
    \end{flushleft}
    \thispagestyle{mulu}
    \pagestyle{mulu}     % 确保后续页面也保持 mulu 样式
}


\clearpage
\pagenumbering{arabic} % 切换到阿拉伯数字作为正文页码
\setcounter{page}{1} % 重置页码计数器
% 通常来说，你在下面章节填充内容即可！
\subfile{sections/section1-Introduction}

\subfile{sections/section2-.tex}

这里展示参考文献\cite{yolov7} \cite{csp} \cite{crossconv} \cite{softmax} \cite{IN,tsr,pubtablenet} \cite{latex-seq,yolact} \cite{yolov11}

% 参考文献部分
\clearpage
\phantomsection % 手动插入锚点
\addcontentsline{toc}{section}{参考文献}
\bibliography{ref/ref}

\subfile{sections/Academic-achievement}

\subfile{sections/Acknowledgments}

\subfile{sections/YCXSM}

% \end{sloppypar}
\end{document}

